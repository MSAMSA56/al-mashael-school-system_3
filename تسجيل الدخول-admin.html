<!DOCTYPE html>
<html lang="ar" dir="rtl">
<ุงูุฑุฃุณ>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ุชุณุฌูู ุฏุฎูู ุงูุฅุฏุงุฑุฉ - ูุธุงู ุงููุดุงุนู</title>
  <meta name="color-scheme" content="light dark"/>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet"/>
  <ุงูููุท>
    :ุฌุฐุฑ {
      --bg: #0b1220ุ --card: #111a2bุ --muted: #94a3b8ุ --text: #e2e8f0ุ
      --ุงูุฃุณุงุณู:#ef4444ุ --ุงูุฃุณุงุณู-600:#dc2626ุ --ุฎุทุฑ:#ef4444ุ
      --ring: rgba(239,68,68,.35); --input:#1f2a44; --shadow: 0 20px 45px rgba(2,6,23,.35);
    }
    [data-theme="light"] {
      --bg:#f6f7fb; --card:#fff; --muted:#475569; --text:#0f172a;
      --ุงูุฃุณุงุณู:#dc2626ุ --ุงูุฃุณุงุณู-600:#b91c1cุ --ุฎุทุฑ:#dc2626ุ
      --ring: rgba(220,38,38,.25); --input:#f1f5f9; --shadow: 0 18px 36px rgba(15,23,42,.12);
    }
    *{ุญุฌู ุงูุตูุฏูู: ุตูุฏูู ุงูุญุฏูุฏ}
    htmlุ ุงูุฌุณู{ุงูุงุฑุชูุงุน: 100ูช}
    ุฌุณู{
      margin:0; font-family:"Cairo", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      ุงูุฎูููุฉ: ุชุฏุฑุฌ ุดุนุงุนู (1200 ุจูุณู 500 ุจูุณู ุนูุฏ 90% -10%ุ rgba (239,68,68,.08)ุ ุดูุงู 60%)ุ
                  ุงูุชุฏุฑุฌ ุงูุดุนุงุนู (900 ุจูุณู 500 ุจูุณู ุนูุฏ -10% 110%ุ rgba (34,197,94,.08)ุ ุดูุงู 60%)ุ
                  var(--bg);
      ุงูููู: var(--text);
      ุงูุนุฑุถ: ุงูุดุจูุฉุ ูุถุน ุงูุนูุงุตุฑ: ุงููุฑูุฒุ ุงูุญุดู: 24 ุจูุณูุ
    }
    .app{ุงูุนุฑุถ: 100%ุ ุงูุญุฏ ุงูุฃูุตู ููุนุฑุถ: 480 ุจูุณูุ ุงูุนุฑุถ: ุดุจูุฉุ ุงููุฌูุฉ: 24 ุจูุณู}
    .card{ุงูุฎูููุฉ: ุชุฏุฑุฌ ุฎุทู (180 ุฏุฑุฌุฉุ ูุฒูุฌ ุงูุฃููุงู (ูู Oklabุ var(--card)ุ ุดูุงู 8ูช)ุ var(--card));
      ุงูุญุฏูุฏ: 1 ุจูุณู ูุฒูุฌ ุงูุฃููุงู ุงูุตูุจุฉ (ูู Oklabุ var(--text)ุ ุดูุงู 88ูช)ุ ูุตู ูุทุฑ ุงูุญุฏูุฏ: 16 ุจูุณูุ ุธู ุงูุตูุฏูู: var(--shadow)ุ ุงูุญุดู: 28 ุจูุณู}
    .header{ูุญุงุฐุงุฉ ุงููุต:ุงููุฑูุฒุ ูุงูุด ุฃุณูู:24 ุจูุณู}
    .ุดุงุฑุฉ ุงูุฏูุฑ{ุนุฑุถ: ูุฑู ูุถููุ ูุญุงุฐุงุฉ ุงูุนูุงุตุฑ: ูุฑูุฒุ ูุฌูุฉ: 8 ุจูุณูุ ุฎูููุฉ: ูุชุบูุฑ (--ุฃุณุงุณู)ุ ููู: ุฃุจูุถุ ูุณุงุญุฉ ุงูุญุดู: 8 ุจูุณู 16 ุจูุณูุ ูุตู ูุทุฑ ุงูุญุฏูุฏ: 12 ุจูุณูุ ุญุฌู ุงูุฎุท: 14 ุจูุณูุ ูุฒู ุงูุฎุท: 600ุ ูุงูุด ุณููู: 16 ุจูุณู}
    h1{ุงููุงูุด: 0 0 8 ุจูุณู 0ุ ุญุฌู ุงูุฎุท: 28 ุจูุณู}
    .subtitle{color:var(--muted); font-size:14px; margin:0}
    .grid{ุนุฑุถ:ุดุจูุฉุ ูุฌูุฉ:12 ุจูุณู}
    .row{ุนุฑุถ:ุดุจูุฉุ ูุฌูุฉ:8 ุจูุณู}
    .label{ุญุฌู ุงูุฎุท: 14 ุจูุณูุ ุงูููู: var(--muted)}
    .input{ุงููุธูุฑ: ูุง ุดูุกุ ุงูุฎูููุฉ: var(--input)ุ ุงูููู: var(--text)ุ ุงูุญุฏูุฏ: 1 ุจูุณู ุตูุจุฉ ุดูุงูุฉุ ูุตู ูุทุฑ ุงูุญุฏูุฏ: 12 ุจูุณูุ ุงูุญุดู: 12 ุจูุณู 14 ุจูุณูุ ุงููุฎุทุท ุงูุชูุตููู: ูุง ุดูุกุ ุงูุงูุชูุงู: .2 ุซุงููุฉุ ุงูุนุฑุถ: 100ูช}
    .input:focus{box-shadow:0 0 0 6px var(--ring); border-color:var(--primary)}
    .btn{ุนุฑุถ: ูุฑู ูุถููุ ูุญุงุฐุงุฉ ุงูุนูุงุตุฑ: ูุฑูุฒุ ุถุจุท ุงููุญุชูู: ูุฑูุฒุ ูุฌูุฉ: 8 ุจูุณูุ ุญุดู: 12 ุจูุณู 14 ุจูุณูุ ูุตู ูุทุฑ ุงูุญุฏูุฏ: 12 ุจูุณูุ ุญุฏูุฏ: 1 ุจูุณู ุดูุงูุฉ ุตูุจุฉุ ูุคุดุฑ: ูุคุดุฑุ ุงูุชูุงู: .2 ุซุงููุฉุ ูุฒู ุงูุฎุท: 600ุ ุนุฑุถ: 100ูช}
    .btn.primary{ุงูุฎูููุฉ:var(--primary); ุงูููู:ุฃุจูุถ}
    .btn.primary:hover{background:var(--primary-600)}
    .btn.ghost{ุฎูููุฉ: ุดูุงูุฉุ ููู: var(--text)ุ ููู ุงูุญุฏูุฏ: ูุฒูุฌ ุงูุฃููุงู (ูู oklabุ var(--text)ุ ุดูุงู 84ูช)}
    .btn.danger{background:var(--danger); ุงูููู:#ููู}
    .hint{ุญุฌู ุงูุฎุท: 13 ุจูุณูุ ุงูููู: var(--muted)ุ ูุญุงุฐุงุฉ ุงููุต: ูู ุงูููุชุตู}
    .ูุฌุงุญ{ุงูููู:#16a34aุ ูุญุงุฐุงุฉ ุงููุต:ุงููุฑูุฒ}
    .error{color:#ef4444; text-align:center}
    .back-link{ูุญุงุฐุงุฉ ุงููุต:ุงููุฑูุฒุ ูุงูุด ุงูุฃุนูู:16 ุจูุณู}
    .back-link a{color:var(--muted); text-decoration:none; font-size:14px}
    . ุงูุฑุงุจุท ุงูุฎููู a:hover{color:var(--primary)}
    .ุชุจุฏูู ุงููุบุฉ {
      ูุญุงุฐุงุฉ ุงููุต: ุงููุฑูุฒุ ุงููุงูุด ุงูุณููู: 12 ุจูุณูุ ุงูุนุฑุถ: ูุฑูุ ูุญุงุฐุงุฉ ุงููุญุชูู: ุงููุฑูุฒุ ุงููุฌูุฉ: 8 ุจูุณูุ
    }
  </style>
</head>
<ุงูุฌุณู>
  <div class="app">
    <div class="card">
      <div class="header">
        <div class="language-switch">
          <button class="btn ghost" id="btn-toggle-lang">ุงูุฅูุฌููุฒูุฉ</button>
          <button class="btn ghost" id="btn-toggle-theme">๐/โ๏ธ</button>
        </div>
        <div class="role-badge">โ๏ธ ุงูุฅุฏุงุฑุฉ</div> ุฏุฎูู
        <h1>ูุฑุญุจุงู ุจู</h1>
        <p class="subtitle">ุณุฌู ุฏุฎููู ูููุตูู ุฅูู ููุญุฉ ุงูุฅุฏุงุฑุฉ</p>
      </div>
      
      <div class="grid">
        <div class="row">
          <label class="label" for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
          <input class="input" id="email" placeholder="admin@example.com" type="email"/>
        </div>
        <div class="row">
          <label class="label" for="password">ูููุฉ ุงููุฑูุฑ</label>
          <input class="input" id="password" placeholder="โขโขโขโขโขโขโขโข" type="password"/>
        </div>
        <button class="btn Primary" id="btn-login">ุชุณุฌูู ุงูุฏุฎูู</button>
        <button class="btn Ghost" id="btn-forgot" type="button">ูุณูุช ูููุฉ ุงููุฑูุฑุ</button>
      </div>
      
      <div class="hint" id="status"></div>
      
      <div class="back-link">
        <a href="index.html">โ ุงูุนูุฏุฉ ุงููููุฉ ุงูุฏูุฑ</a>
      </div>
    </div>
  </div>
  
  <script type="module">
    ุงุณุชูุฑุงุฏ {initializeApp} ูู "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
    ุงุณุชูุฑุงุฏ { getAuthุ signInWithEmailAndPasswordุ onAuthStateChanged } ูู "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js"ุ
    ุงุณุชูุฑุงุฏ {getFirestoreุ docุ getDoc} ูู "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js"ุ
    
    ุซุงุจุช firebaseConfig = {
      ููุชุงุญ ูุงุฌูุฉ ุจุฑูุฌุฉ ุงูุชุทุจููุงุช: 'AIzaSyCD-lB-RPKHxDeHrs4243rkqpkQ36ZSUHg',
      authDomain: 'al-mashael-school-system.firebaseapp.com',
      projectId: 'ุงููุดุงุนู-ูุธุงู ุงููุฏุงุฑุณ',
      storageBucket: 'al-mashael-school-system.firebasestorage.app',
      ูุนุฑู ุงููุฑุณู: '387864421863'ุ
      ูุนุฑู ุงูุชุทุจูู: '1:387864421863:web:ef761039351de11ab2c942'
    };
    
    ุชุทุจูู ุซุงุจุช = initializeApp(firebaseConfig)ุ
    ุซุงุจุช ุงููุตุงุฏูุฉ = getAuth(ุงูุชุทุจูู)ุ
    ุซุงุจุช db = getFirestore(ุงูุชุทุจูู)ุ
    
    ุซุงุจุช $ = (ูุนุฑู) => ุงููุณุชูุฏ.getElementById(ูุนุฑู)ุ
    const setStatus = (msg, type='') => {
      ุซุงุจุช el = $('ุงูุญุงูุฉ');
      el.textContent = msg;
      el.className = 'ุชูููุญ' + (ููุน || '');
    };
    
    $('btn-login').onclick = async () => {
      ุซุงุจุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู = $('ุงูุจุฑูุฏ ุงูุฅููุชุฑููู').value.trim();
      ูููุฉ ุงููุฑูุฑ ุงูุซุงุจุชุฉ = $('ูููุฉ ุงููุฑูุฑ').ุงููููุฉุ
      
      ุฅุฐุง ูู ููู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู || !ูููุฉ ุงููุฑูุฑ) {
        return setStatus('ุงูุฑุฌุงุก ุญุฌู ุงูุจุฑูุฏ ููููุฉ ุงููุฑูุฑ', 'ุฎุทุฃ');
      }
      
      ูุญุงูู {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        ุซุงุจุช ุงููุณุชุฎุฏู = userCredential.userุ
        
        // ุชุญูู ููุง ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุณุคููุงู ูู ูุฌููุนุฉ ุงููุณุคูููู
        ุซุงุจุช adminRef = doc(ูุงุนุฏุฉ ุงูุจูุงูุงุชุ 'ุงููุณุคูููู'ุ user.uid)ุ
        ุซุงุจุช adminSnap = ุงูุชุธุงุฑ getDoc(adminRef)ุ
        
        ุฅุฐุง (adminSnap.exists()) {
          setStatus('ุชู ุชุณุฌูู ุงูุฏุฎูู ุงููุนุงู!', 'success');
          ุชุนููู ูููุฉ(() => {
            window.location.href = 'dashboard-admin.html';
          }, 1000);
        } ุขุฎุฑ {
          ุงูุชุธุฑ auth.signOut();
          setStatus('ูุฐุง ุงูุญุณุงุจ ููุณ ุญุณุงุจ ุฅุฏุงุฑุฉ', 'ุฎุทุฃ');
        }
      } catch (ุฎุทุฃ) {
        setStatus(' ุฎุทุฃ ูู ุชุณุฌูู ุงูุฏุฎูู: ' + error.message, 'error');
      }
    };
    
    // ุชุญูู ููุง ุฅุฐุง ููุช ูุฏ ููุช ุจุชุณุฌูู ุงูุฏุฎูู ุจุงููุนู
    ุชู ุชุบููุฑ ุญุงูุฉ ุงููุตุงุฏูุฉ (ุงููุตุงุฏูุฉุ ุบูุฑ ูุชุฒุงูู (ุงููุณุชุฎุฏู) => {
      ุฅุฐุง ุนุงุฏ (! ุงููุณุชุฎุฏู)ุ // ููุน ุงูุฏุฎูู ุงูุชููุงุฆู ููุฌูุณุงุช ุงููุฏููุฉ ุจุฏูู ุงูุตุฑุงุญุฉ ุตุฑูุญ ููู ุฏุฎูู
    });
    // ุฒุฑ ูุณูุช ูููุฉ ุงููุฑูุฑ โ ููุชุญ ูุงุชุณุงุจ
    $('btn-forgot').onclick = () => {
      ุซุงุจุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู = $('ุงูุจุฑูุฏ ุงูุฅููุชุฑููู').value.trim();
      if (!email) return setStatus('ูุฑุฌู ุงูุชุณุฌูู ูู ุจุฑูุฏู ุงูุฌุฏูุฏ ุซู ุงุถุบุท ุนูู ูุณูุช ูููุฉ ุงููุฑูุฑ', 'error');
      const msg = encodeURIComponent(`ุทูุจ ุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ ูุญุณุงุจ ุฅุฏุงุฑุฉ โ๏ธ\nุงูุจุฑูุฏ: ${email}\nูุฑุฌู ูุชุงุจุนุฉ ูุชูุนูู ุงูุญุณุงุจ.`);
      ุงููุงูุฐุฉ.open(`https://wa.me/966566079856?text=${msg}`, '_blank');
    };
    // ุชูุนูู ุงููุถุน ุงููููู/ุงููุชุญ
    $('btn-toggle-theme').onclick = () => {
      ุซุงุจุช ุงูุญุงูู = document.body.getAttribute('data-theme') || '';
      document.body.setAttribute('data-theme', current === 'light' ? '' : 'light');
    };
    // ุชุบููุฑ ุงููุบุฉ (ูุงุฌูุฉ ุฃูููุฉ ููุท)
    $('btn-toggle-lang').onclick = () => {
      ุชูุจูู('ุณูุชู ุฏุนู ุงููุบุฉ ุงูุงูุฌููุฒูุฉ ูุฑูุจุง');
    };
    ุชู ุชุบููุฑ ุญุงูุฉ ุงููุตุงุฏูุฉ (ุงููุตุงุฏูุฉุ ุบูุฑ ูุชุฒุงูู (ุงููุณุชุฎุฏู) => {
      ุฅุฐุง (ุงููุณุชุฎุฏู) {
        ุซุงุจุช adminRef = doc(ูุงุนุฏุฉ ุงูุจูุงูุงุชุ 'ุงููุณุคูููู'ุ user.uid)ุ
        ุซุงุจุช adminSnap = ุงูุชุธุงุฑ getDoc(adminRef)ุ
        ุฅุฐุง (adminSnap.exists()) {
          window.location.href = 'dashboard-admin.html';
        }
      }
    });
  </script>
</body>
</html>
